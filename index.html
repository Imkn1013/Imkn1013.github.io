<!-- 
Socket.IO v2.1.1
(c) 2014-2018 Guillermo Rauch
Released under the MIT License.
https://opensource.org/licenses/mit-license.php
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Socket.IO Client</title>
  <script src="https://cdn.socket.io/4.5.0/socket.io.min.js"></script>
</head>
<body>
  <h1>Socket.IO Client</h1>
  <textarea id="roomidarea">ルームIDを入力</textarea>
  <button id="mkroom">ルームを作成/参加</button>
  <textarea id="messagearea">メッセージを入力</textarea>
  <button id="sendmessage">ルームにメッセージを送信</button>
  <script>
    // GlitchのサーバーURLを指定
    const socket = io("https://conscious-giddy-antarctopelta.glitch.me");

    // サーバーに接続
    socket.on("connect", () => {
      console.log("Connected to the server");

      // サーバーにメッセージを送信
      socket.emit("message", "Hello, Server!");
    });

    // サーバーからのメッセージを受信
    socket.on("message", (data) => {
      console.log("Received message from server:", data);
    });

    // ルーム内のメッセージを受信
    socket.on('message', (data) => {
      console.log('Room message:', data);
    });

    document.getElementById("mkroom").addEventListener('click', function(){
      const roomid=document.getElementById("roomidarea").value;
      socket.emit('joinRoom', `${roomid}`);
      socket.on('message', (data) => {
      console.log(data);
      });
    });
    var message;
    document.getElementById("sendmessage").addEventListener('click', function(){
      message=document.getElementById("messagearea").value;
      // ルーム内にメッセージを送信
      socket.emit('sendMessageToRoom', { room: 'room1', message: `${message}` });
    });
    
  </script>
</body>
</html>
